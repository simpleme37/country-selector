/* ================================
 * 變數
 * ================================ */
$font-primary: 'Noto Sans TC', sans-serif;
$font-weight-regular: 400;
$text-large: 16px;
$text-normal: 14px;
$text-small: 13px;
$color-red: #db0f00;
$color-orange: #ff8000;
$color-yellow: #fff9d6;
$color-blue: #009ace;
$color-light-green: #00aa00;
$color-dark-green: #008e7f;
$color-brown: #eae9dd;
$color-gray-900: #2d2d2d;
$color-gray-500: #8b8b8b;
$color-gray-200: #dedede;
$color-gray-100: #f1f1f1;
$color-white: #ffffff;

/* ================================
 * CSS Reset 與字型
 * ================================ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    list-style: none;
    text-decoration: none;
    background-color: transparent;
}

body {
    color: $color-gray-900;
    font-family: $font-primary;
    font-size: $text-normal;
    font-weight: $font-weight-regular;
}

/* ================================
 * Country Selector 元件樣式
 * ================================ */
.country-selector {
    position: relative;
    width: 100%;

    /* ========== 表單標籤 ========== */
    &__label {
        display: flex;
        gap: 2px;
        color: $color-white;
        span {
            color: $color-red;
        }
        margin-bottom: 4px;
    }

    /* ========== 觸發按鈕 ========== */
    &__trigger {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        min-height: 40px; // 保證最小高度，不然 dialcode 模式數字會導致按鈕比較矮
        gap: 4px;
        padding: 8px;
        border-radius: 4px;
        border: 1px solid $color-gray-200;
        background-color: $color-white;
        color: $color-gray-900;
        cursor: pointer;
        outline: none;

        &:hover:not(:disabled) {
            border-color: $color-gray-500;
        }

        &--open {
            border-color: $color-gray-500;
        }
    }

    &__trigger-text {
        &--placeholder {
            color: $color-gray-500; // 未選擇時顯示灰色
        }
    }

    /* ========== Disabled 狀態 ========== */
    &--disabled {
        opacity: 0.6;

        .country-selector__trigger {
            cursor: not-allowed;
        }
    }

    /* ========== 下拉選單 ========== */
    &__dropdown {
        position: absolute;
        z-index: 1;
        min-width: max(100%, 280px); // 桌面版最少 280px，手機版跟 trigger 一樣寬
        max-width: min(368px, 100vw - 32px); // 桌面版最多 368px，手機版留 16px padding
        padding: 8px;
        background-color: $color-white;
        border-radius: 4px;
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        overflow: hidden; // 防止內容溢出
        display: flex;
        flex-direction: column;

        // 預設往下展開
        top: calc(100% + 4px);

        // 往上展開時
        &--top {
            top: auto;
            bottom: calc(100% + 4px);
        }
    }

    /* ========== 搜尋框 ========== */
    &__search {
        position: relative;
        margin-bottom: 8px;
    }

    &__search-input {
        width: 100%;
        padding: 8px;
        border: 1px solid $color-gray-200;
        outline: none;
        border-radius: 4px;
    }

    // 輸入框內 icon
    .search-icon,
    .clear-icon {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        color: $color-gray-500;
    }

    /* ========== 提示文字 ========== */
    &__hint {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 4px 8px 8px 8px;
        font-size: $text-small;
    }

    /* ========== 國家列表 ========== */
    &__list {
        overflow-y: auto;
        flex: 1; // 佔滿剩餘空間
        min-height: 0; // 允許 flex 壓縮

        // loading 狀態：
        &.country-selector--loading {
            overflow-y: hidden;
        }
    }

    &__list-title {
        font-size: $text-small;
        color: $color-gray-500;
        padding: 4px 8px;
    }

    // 分組字母標題 (A-Z)
    &__list-letter {
        color: $color-gray-500;
        padding: 8px;
    }

    &__list-item {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 4px;
        padding: 8px;
        border-radius: 8px;

        // 無搜尋結果
        &--empty {
            color: $color-blue;
        }

        // 載入中狀態
        &--loading {
            justify-content: center;
            gap: 8px;
            color: $color-gray-500;
            font-size: $text-normal;
        }

        // 已選中狀態
        &--selected {
            background-color: $color-gray-100;
        }

        &:hover {
            background-color: $color-gray-100;
        }
    }

    // 國碼 (+886)
    &__list-item-code {
        color: $color-gray-500;
        flex-shrink: 0; // 防止被壓縮
    }

    &__loading-spinner {
        font-size: 18px;
        display: inline-block;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    /* ========== 搜尋關鍵字 Highlight 樣式 ========== */
    mark {
        background-color: transparent;
        color: $color-red;
    }
}
